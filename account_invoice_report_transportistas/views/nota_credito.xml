<?xml version="1.0" encoding="utf-8"?>
<openerp>
	<data>



		<template id="report_account_invoice_notas_codima_document">


		    <t t-call="report.html_container">

		      <div class="row" t-foreach="[{'name': 'ORIGINAL', 'num': 1}, {'name': 'COPIA', 'num': 2}]" t-as="repeticion">
			        <div class="header" style="font-size: 16px !important; line-height: 170%;">
						<style>
							.table-bordered {
								border: 1px solid #000;
							}

							.table-bordered2 {
								border-collapse: inherit;
							}
							.table-bordered2 {
								border-top: none;
							}
							.table-bordered2 &gt; thead &gt; tr {
								padding-bottom: 10px;
							}
							.table-bordered2 &gt; tbody &gt; tr &gt; td{
								border: 1px solid #000;
								border-left: 1px solid;
								padding-top: 0px;
								padding-bottom: 0px;
								border-collapse: collapse;
								border-radius: 1em;

							}
							.table-bordered2 &gt; thead &gt; tr &gt; th{
								border-bottom: 1px solid  #000;
							}
						</style>
						<div class="row">
							<div class="col-xs-3">
								<img t-attf-src="data:image/*;base64,{{o.company_id.logo}}" t-att-alt="o.company_id.name" height="120" width="190"/>
							</div>
							<div class="col-xs-6">
								<table class="table table-bordered2 text-center" style="border-collapse: inherit!important;border:none!important;">
									<tbody>
										<tr>
											<td>
												<strong class="text-uppercase">Juan carlos miranda barrantes</strong>
												<br/>
												<span>Ced: 7-076-193</span>
												<br/>
												<span class="text-uppercase">atenas, 100 este, 50 norte del banco nacional</span>
												<div class="row">
													<div class="col-xs-12 text-center">
														<span class="text-uppercase">tel: 2446-8678  2446-4018  2446-5713</span>
													</div>
												</div>
												<span>E-mail: info@scmiranda.com</span>
											</td>
										</tr>
									</tbody>
								</table>
							</div>
							<div class="col-xs-3 text-center">
								<span class="text-uppercase">Nota Crédito:</span>
								<div class="row">
									<div class="col-xs-12">
										<strong t-esc="o.number"/>
										<br/>
									</div>
								</div>


							<h3 class="text-center" style="margin-bottom: 0px;">
								<strong t-esc="repeticion['name']"/>
							</h3>
								<ul class="list-inline">
									<li>Página:</li>
									<li><span class="page"/></li>
									<li>/</li>
									<li><span class="topage"/></li>
								</ul>

							</div>

						</div>
					</div>
				    <div class="page" style="font-size: 14px;">
						<style>
							.table-bordered {
								border: 1px solid #000;
								border-radius: 15px;
							}
							.table-bordered &gt; thead &gt; tr {
								border: none;
								padding-bottom: 10px;
							}
							.table-bordered &gt; tbody &gt; tr &gt; td{
								border: 1px solid white !important;
								padding-top: 0px;
								padding-bottom: 0px;
							}
							.table-bordered &gt; thead &gt; tr &gt; th{
								border-top: 1px solid #000;
								border-bottom: 1px solid #000;
								border-left: none;
								border-right: none;
							}

							.table-bordered2 {
								border-collapse: inherit;
							}
							.table-bordered2 {
								border-top: none;
							}
							.table-bordered2 &gt; thead &gt; tr {
								padding-bottom: 10px;
							}
							.table-bordered2 &gt; tbody &gt; tr &gt; td{
								border: 1px solid #000;
								border-left: 1px solid;
								padding-top: 0px;
								padding-bottom: 0px;
								border-collapse: collapse;
								border-radius: 1em;

							}
							.table-bordered2 &gt; thead &gt; tr &gt; th{
								border-bottom: 1px solid  #000;
							}

							.fondo-gris {
								background: #f2f2f2;
							}
							.watermark
							{
								position: fixed;
								top: 550px;
								left: 200px;
								opacity: 0.1;
								z-index: 99;
								color: #000;
								FONT-SIZE: 90px;
							}
						</style>

						<div class="row">
							<div class="col-xs-8" style="padding-right: 0px !important">
								<table class="table table-bordered2" style="height: 80px!important;border-collapse: inherit!important;border:none!important;margin-bottom: 5px !important;">
									<tbody>
										<tr>
											<td>
												<div class="row">
													<div class="col-xs-12">
														<span>Cliente:</span>
														<strong class="text-uppercase" t-esc="o.nombre_facturar or o.partner_id.name"/>
													</div>
													<div class="col-xs-12" t-if="o.related_project_id">
														<span>Proyecto:</span>
														<strong class="text-uppercase" t-field="o.related_project_id.name"/>
													</div>
												</div>
												<div class="row">
													<div class="col-xs-12">
														<span>Dirección:</span>
														<span t-field="o.partner_id.street"/>
														<span t-field="o.partner_id.street2"/>
														<span>&amp;nbsp;</span>
													</div>
												</div>
												<div class="row">
													<div class="col-xs-4">
														<span>Código:</span>
														<span t-field="o.partner_id.code"/>
													</div>
													<div class="col-xs-4">
														<span>Cédula:</span>
														<span t-field="o.partner_id.ref"/>
													</div>
													<div class="col-xs-4">
														<span>Teléfono:</span>
														<span t-field="o.partner_id.phone"/>
													</div>
												</div>
												<br/>
											</td>
										</tr>
									</tbody>
								</table>
							</div>
							<div class="col-xs-4" style="padding-left: 0px !important">
								<table class="table table-bordered2" style="height: 80px!important;border-collapse: inherit!important;border:none!important;">
									<tbody>
										<tr>
											<td>
												<div class="row text-center">
													<div class="col-xs-12">
														<span>Fecha y Hora de la factura:</span>
														<br/>
														<span t-field="o.validate_date" class="text-uppercase" t-field-options="{&quot;format&quot;: &quot;d/MM/y hh:m:s a&quot;}"/>
													</div>
												</div>
												<div class="row">
													<div class="col-xs-7">

														<br/>

													</div>
													<div class="col-xs-5">
														<br/>

													</div>
												</div>
											</td>
										</tr>
									</tbody>
								</table>
							</div>
						</div>
						<div class="watermark"><strong t-esc="repeticion['name']"/></div>
						<table class="table table-bordered">
							<thead>
								<tr>
									<th class="text-center">
										CÓDIGO
									</th>
									<th class="text-center">
										NOMBRE
									</th>
									<th class="text-center">
										CANT.
									</th>
									<th class="text-center">
										EXENTO
									</th>
									<th class="text-center">
										GRAVADO
									</th>
									<th class="text-center">
										SUBTOTAL
									</th>
								</tr>
							</thead>
							<tbody>
								<tr t-foreach="o.fillLines()" t-as="line">
									<t t-if="not line.get('blank', False)">
										<t t-set="imp" t-value="line['l'].invoice_line_tax_ids.compute_all(line['l'].price_unit, False, 1, product=line['l'].product_id, partner=False)"/>
									</t>
									<td class="text-center">
										<t t-if="not line.get('blank', False)">
											<span t-esc="(line['l'].product_id) and line['l'].product_id.default_code or ' '"/>
									    </t>
										<t t-if="line.get('blank', False)">
											<span>&amp;nbsp;</span>
									    </t>
									</td>
									<td class="text-center">
										<t t-if="not line.get('blank', False)">
											<span t-esc="(line['l'].product_id) and line['l'].product_id.name[:40] or line['l'].name[:40]"/>
									    </t>
										<t t-if="line.get('blank', False)">
											<span>&amp;nbsp;</span>
									    </t>
									</td>
									<td class="text-center">
										<t t-if="not line.get('blank', False)">
										    <span t-field="line['l'].quantity"/>
									    </t>
									</td>
									<td class="text-right">
										<t t-if="not line.get('blank', False)">
											<t t-if="line['l'].price_unit == imp['total_included']">
												<span t-esc="o.format(line['l'].price_unit)" t-field-options="{&quot;widget&quot;: &quot;monetary&quot;, &quot;display_currency&quot;: &quot;o.currency_id&quot;}"/>
											</t>
									    </t>
									</td>
									<td class="text-right">
										<t t-if="not line.get('blank', False)">
											<t t-if="line['l'].price_unit != imp['total_included']">
												<span t-esc="o.format(imp['total_included'])" t-field-options="{&quot;widget&quot;: &quot;monetary&quot;, &quot;display_currency&quot;: &quot;o.currency_id&quot;}"/>
											</t>
										</t>
									</td>
									<td class="text-right">
										<t t-if="not line.get('blank', False)">
										    <span t-esc="o.format(imp['total_included'] * line['l'].quantity)"/>
									    </t>
									</td>
								</tr>

								<tr t-foreach="o.espaces()" t-as="line">
									<td/>
									<td/>
									<td/>
									<td>
										<span>&amp;nbsp;</span>
									</td>
									<td/>
									<td/>
								</tr>
							</tbody>
						</table>
						<table class="table table-bordered2" style="border-collapse: inherit!important;border:none!important;">
							<tbody>
								<tr>
									<td>
										<strong>Detalle:</strong>
										<br/>
										<br/>
										<span>&amp;nbsp;</span>
										<span t-esc="o.comment"/>
									</td>
								</tr>
								<tr>
									<td>
										<div class="row">
											<div class="col-xs-8">
												<span>&amp;nbsp;</span>
												<br/>
												<span>Nombre completo:</span>
											</div>
											<div class="col-xs-4">
												<span>&amp;nbsp;</span>
												<br/>
												<span>Cédula:</span>
											</div>
										</div>
									</td>
								</tr>
							</tbody>
						</table>

<div class="row">
							<div class="col-xs-8">
								<table class="table table-bordered2" style="height: 150px!important">
									<tr>
										<td>
											<div class="row text-left">
												<div class="col-xs-12">
													<strong>Nota de crédito aplicada por concepto de: </strong><span class="text-uppercase" t-field="o.name"/>
													<br/>
													<strong>Aplicada a: </strong><span class="text-uppercase" t-field="o.refund_invoice_id"/>
												</div>
											</div>
											<div class="row">
												<div class="col-xs-6">
													<span class="text-uppercase">
														&amp;nbsp;
													</span>
												</div>
												<div class="col-xs-6">
													<span class="text-uppercase">
														&amp;nbsp;
													</span>
												</div>
											</div>
											<div class="row">
												<div class="col-xs-6">
													<span class="text-uppercase">
														&amp;nbsp;
													</span>
												</div>
												<div class="col-xs-6">
													<span class="text-uppercase">
														&amp;nbsp;
													</span>
												</div>
											</div>
											<div class="row">
												<div class="col-xs-12">

												</div>
											</div>
											<hr style="margin: 0px;padding: 0px;border-top: 1px solid;"/>
											<div class="row">
												<div class="col-xs-12 text-center">
											Esta factura constituye título ejecutivo y doy por aceptada las condiciones del código de
								comercio en articulo 460. Esta factura devengará un 4.00 % de interes de mora.
												</div>
											</div>
										</td>
									</tr>
								</table>

							</div>
							<div class="col-xs-4">
								<table class="table table-bordered2" style="height: 150px!important">
									<tbody>
										<tr>
											<td>
												<div class="row">
													<div class="col-xs-6">
														<strong class="text-uppercase ">
															sub-total
														</strong>
													</div>
													<div class="col-xs-6 text-right">
														<span t-field="o.amount_untaxed" t-field-options="{&quot;widget&quot;: &quot;monetary&quot;, &quot;display_currency&quot;: &quot;o.currency_id&quot;}"/>
													</div>
												</div>
												<div class="row">
													<div class="col-xs-6">
														<strong class="text-uppercase">
															descuento
														</strong>
													</div>
													<div class="col-xs-6 text-right">
														<span t-field="o.amount_total_discount" t-field-options="{&quot;widget&quot;: &quot;monetary&quot;, &quot;display_currency&quot;: &quot;o.currency_id&quot;}"/>
													</div>
												</div>

												<div class="row">
													<div class="col-xs-6">
														<strong class="text-uppercase">
															i.v.a.
														</strong>
													</div>
													<div class="col-xs-6 text-right">
														<span t-field="o.amount_tax" t-field-options="{&quot;widget&quot;: &quot;monetary&quot;, &quot;display_currency&quot;: &quot;o.currency_id&quot;}"/>
													</div>
												</div>
												<hr style="margin: 0px;padding: 0px;border-top: 1px solid;"/>
												<div class="row">
													<div class="col-xs-6">
														<strong class="text-uppercase">
															total
														</strong>
													</div>
													<div class="col-xs-6 text-right">
														<strong t-field="o.amount_total" t-field-options="{&quot;widget&quot;: &quot;monetary&quot;, &quot;display_currency&quot;: &quot;o.currency_id&quot;}"/>
													</div>
												</div>
											</td>
										</tr>
										<tr>
											<td>
												<span class="text-uppercase">
													aut. oficio n-11-97 de ago-97 dgtd
												</span>
												<br/>
												<span class="text-uppercase">
													gracias por su visita
												</span>
											</td>
										</tr>
									</tbody>
								</table>
							</div>
						</div>

				    </div>
				    <div class="footer" style="font-size: 14px;">
						<!--style>
							span, strong{
								font-size:12px !important;
							}


							.table-bordered2 {
								height: 100%;
							}
							.table-bordered2 {
								border-top: none;
							}
							.table-bordered2 &gt; thead &gt; tr {
								padding-bottom: 10px;
							}
							.table-bordered2 &gt; tbody &gt; tr &gt; td{
								border: 1px solid #000;
								border-left: 1px solid;
								padding-top: 0px;
								padding-bottom: 0px;
								border-collapse: collapse;
								border-radius: 1em;
							}
							.table-bordered2 &gt; thead &gt; tr &gt; th{
								border: 1px solid #FFF;
							}
							.table-bordered2 &gt; thead &gt; tr &gt; th{
								border-bottom: 1px solid  #000;
							}
							.text-right{
								text-align: right;
							}

						</style-->

						<!--div class="row">
							<div class="col-xs-4">
								<div class="row">
									<div class="col-xs-12">
										<table class="table table-bordered2" style="height: 150px!important">
											<tr>
												<td>
													<span>
														De acuerdo al articulo 460 del Código de Comercio esta factura constituye un titulo Ejecutivo. el deudor renuncia a los requerimientos de pago y domicilio despues de transcurrido el plazo de cancelación de esta factura, devengará intereses del 4% mensual, sin que esto signifique prorroga.
													</span>
													<br/>

													<strong class="text-uppercase">
														nota: no se aceptan devoluciones
													</strong>

												</td>
											</tr>
										</table>
									</div>
								</div>
							</div>
							<div class="col-xs-4">
								<table class="table table-bordered2" style="height: 150px!important">
									<tbody>
										<tr>
											<td colspan="2">
												<span class="text-uppercase">
													esta factura vence a los </span>
												<span class="text-uppercase" t-field="o.payment_term_id.name"/>
											</td>
										</tr>
										<tr>
											<td colspan="2">
												<span class="text-uppercase">
													&amp;nbsp;
												</span>
												<br/>
												<br/>
												<br/>
												<hr/>
											</td>
										</tr>
										<tr>
											<td>
												<span class="text-uppercase">
													recibo conforme
												</span>
											</td>
											<td>
												<span class="text-uppercase">
													cedula
												</span>
											</td>
										</tr>
									</tbody>
								</table>
							</div>
							<div class="col-xs-4">
								<table class="table table-bordered2" style="height: 150px!important">
									<tbody>
										<tr>
											<td>
												<strong class="text-uppercase ">
													sub-total
												</strong>
											</td>
											<td class="text-right">
												<span t-field="o.amount_untaxed" t-field-options="{&quot;widget&quot;: &quot;monetary&quot;, &quot;display_currency&quot;: &quot;o.currency_id&quot;}"/>
											</td>
										</tr>
										<tr>
											<td>
												<strong class="text-uppercase">
													descuento
												</strong>
											</td>
											<td class="text-right">
												<span t-field="o.amount_total_discount" t-field-options="{&quot;widget&quot;: &quot;monetary&quot;, &quot;display_currency&quot;: &quot;o.currency_id&quot;}"/>
											</td>
										</tr>
										<tr>
											<td>
												<strong class="text-uppercase">
													i.v.a.
												</strong>
											</td>
											<td class="text-right">
												<span t-field="o.amount_tax" t-field-options="{&quot;widget&quot;: &quot;monetary&quot;, &quot;display_currency&quot;: &quot;o.currency_id&quot;}"/>
											</td>
										</tr>
										<tr>
											<td>
												<strong class="text-uppercase">
													total
												</strong>
											</td>
											<td class="text-right">
												<span t-field="o.amount_total" t-field-options="{&quot;widget&quot;: &quot;monetary&quot;, &quot;display_currency&quot;: &quot;o.currency_id&quot;}"/>
											</td>
										</tr>
									</tbody>
								</table>
							</div>
						</div-->
			    	</div>
			  </div>

		    </t>

		</template>

		<template id="report_account_invoice_notas_codima">
		    <t t-call="report.html_container">
		        <t t-foreach="docs" t-as="o">
		            <t t-call="account_invoice_report.report_account_invoice_notas_codima_document" t-lang="o.partner_id.lang"/>
		        </t>
		    </t>
		</template>

        <!-- QWeb Reports -->
        <report
            id="account_invoices_notas_codima"
            model="account.invoice"
            string="Nota Crédito"
            report_type="qweb-pdf"
            name="account_invoice_report.report_account_invoice_notas_codima"
            file="account_invoice_report.report_account_invoice_notas_codima_document"
            attachment_use="False"
            attachment="(object.state in ('open','paid')) and ('INV'+(object.number or '').replace('/','')+'.pdf')"
        />

        <record id="account_invoices_notas_codima" model="ir.actions.report.xml">
            <field name="paperformat_id" ref="paperformat_euro"/>
			<field name="attachment_use" eval="False"/>
        </record>

    </data>
</openerp>
